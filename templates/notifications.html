<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Penguin Sanctuary Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      .notification-item {
        cursor: pointer;
        transition: all 0.2s ease;
      }
      .notification-item:hover {
        background-color: #f0f4ff !important;
      }
      .message-detail {
        transition: opacity 0.3s ease, transform 0.3s ease;
      }
    </style>
  </head>
  <body class="bg-gray-100 text-gray-800">
    <!-- Sidebar Information-->
    <div class="fixed top-0 left-0 h-screen w-64 bg-gray-100 p-4">
      <!-- Logo + Title -->
      <a href="/index" class="flex items-center mb-6 text-gray-800 no-underline">
        <!-- Placeholder for icon -->
        <img src="/static/src/logo.svg" alt="Home" class="w-10 h-8 mr-4" />
        <span class="text-xl font-semibold text-3xl text-si">PenguinCo</span>
      </a>

      <hr class="mb-4 border-gray-300" />

      <!-- Nav Links -->
      <ul class="space-y-2">
        <!-- Home -->
        <li class="group mt-0 hover:bg-blue-600 rounded-md transition-colors duration-200">
          <a href="/index" class="flex items-center px-3 py-2 text-gray-700 group-hover:text-white rounded-md">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-4 group-hover:stroke-white transition-colors duration-200" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
            </svg>
            Home
          </a>
        </li>

        <!-- Live Feed -->
        <li class="group hover:bg-blue-600 rounded-md transition-colors duration-200">
          <a href="/livefeed" class="flex items-center px-3 py-2 text-gray-700 group-hover:text-white rounded-md">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-4 group-hover:stroke-white transition-colors duration-200">
              <path stroke-linecap="round" stroke-linejoin="round" d="m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z" />
            </svg>
            Live Feed
          </a>
        </li>

        <!-- Notifications -->
        <li class="group hover:bg-blue-600 rounded-md transition-colors duration-200">
          <a href="/notifications" class="flex items-center px-3 py-2 text-gray-700 group-hover:text-white rounded-md">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-4 group-hover:stroke-white transition-colors duration-200">
              <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0M3.124 7.5A8.969 8.969 0 0 1 5.292 3m13.416 0a8.969 8.969 0 0 1 2.168 4.5" />
            </svg>
            Notifications
          </a>
        </li>

        <!-- System Logs -->
        <li class="group hover:bg-blue-600 rounded-md transition-colors duration-200">
          <a href="/logs" class="flex items-center px-3 py-2 text-gray-700 group-hover:text-white rounded-md">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-4 group-hover:stroke-white transition-colors duration-200">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3v11.25A2.25 2.25 0 0 0 6 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0 1 18 16.5h-2.25m-7.5 0h7.5m-7.5 0-1 3m8.5-3 1 3m0 0 .5 1.5m-.5-1.5h-9.5m0 0-.5 1.5M9 11.25v1.5M12 9v3.75m3-6v6" />
            </svg>
            System Logs
          </a>
        </li>

        <!-- Settings -->
        <li class="group hover:bg-blue-600 rounded-md transition-colors duration-200">
          <a href="/settings" class="flex items-center px-3 py-2 text-gray-700 group-hover:text-white rounded-md">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-4 group-hover:stroke-white transition-colors duration-200">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
            </svg>
            Settings
          </a>
        </li>
      </ul>
      <hr class="my-4 border-gray-300" />

      <!-- User Menu -->
      <div class="relative inline-block text-left top-0">
        <!-- Trigger -->
        <button id="dropdownButton" onclick="toggleDropdown()" class="inline-flex items-center justify-center w-64 text-white bg-blue-600 px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none">
          <img src="https://github.com/mdo.png" alt="User" class="w-8 h-8 rounded-full mr-auto" />
          <strong>Dr Christina</strong>
          <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
          </svg>
        </button>

        <!-- Dropdown menu -->
        <div id="dropdownMenu" class="hidden absolute bottom-full right-0 mb-2 w-56 bg-white border border-gray-200 rounded-md shadow-lg z-10">
          <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">New project...</a>
          <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Settings</a>
          <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Profile</a>
          <hr class="border-t border-gray-200" />
          <a href="#" class="block px-4 py-2 text-sm text-red-600 hover:bg-red-100">Sign out</a>
        </div>
      </div>

      <script>
        function toggleDropdown() {
          const menu = document.getElementById("dropdownMenu");
          menu.classList.toggle("hidden");
        }

        // Close dropdown when clicking outside
        document.addEventListener("click", function (event) {
          const dropdown = document.getElementById("dropdownMenu");
          const button = document.querySelector('[onclick="toggleDropdown()"]');

          if (!dropdown.contains(event.target) && event.target !== button && !button.contains(event.target)) {
            dropdown.classList.add("hidden");
          }
        });
      </script>
    </div>

    <!-- Main Content Area -->
    <div class="ml-64 p-8 pr-10 w-[calc(100%-12rem-2.5rem)] h-screen overflow-y-auto">
      <div class="flex h-full">
        <!-- Notifications List (left column) -->
        <div class="w-1/2 pr-4">
          <h2 class="text-lg font-semibold mb-2 text-gray-700">Recent Alerts</h2>
          <ul class="space-y-2 max-h-screen overflow-y-auto pr-2" id="notificationsList">
            <!-- Notification items will be populated by JavaScript -->
          </ul>
          
          <h2 class="text-lg font-semibold mb-2 text-gray-700 mt-6">Yesterday</h2>
          <ul class="space-y-2 max-h-screen overflow-y-auto pr-2" id="yesterdayNotifications">
            <!-- Yesterday's notifications -->
          </ul>
          
          <h2 class="text-lg font-semibold mb-2 text-gray-700 mt-6">This Week</h2>
          <ul class="space-y-2 max-h-screen overflow-y-auto pr-2" id="weekNotifications">
            <!-- Week's notifications -->
          </ul>
        </div>

        <!-- Message Detail View (right column) -->
        <div class="w-1/2 pl-4">
          <div id="messageDetail" class="message-detail bg-white p-6 rounded-lg shadow-lg hidden">
            <div class="flex justify-between items-start mb-4">
              <h3 id="detailTitle" class="text-xl font-bold text-gray-800"></h3>
              <span id="detailTime" class="text-sm text-gray-500"></span>
            </div>
            <div id="detailContent" class="text-gray-700 mb-6"></div>
            <div class="border-t pt-4">
              <div class="flex items-center mb-2">
                <span class="text-sm font-medium text-gray-600 mr-2">Priority:</span>
                <span id="detailPriority" class="px-2 py-1 text-xs rounded-full"></span>
              </div>
              <div class="flex items-center mb-2">
                <span class="text-sm font-medium text-gray-600 mr-2">Location:</span>
                <span id="detailLocation" class="text-sm"></span>
              </div>
              <div class="flex items-center">
                <span class="text-sm font-medium text-gray-600 mr-2">Status:</span>
                <span id="detailStatus" class="text-sm"></span>
              </div>
            </div>
            <div class="mt-6 flex space-x-3">
              <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition">
                Acknowledge
              </button>
              <button class="px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition">
                Dismiss
              </button>
            </div>
          </div>
          
          <!-- Empty state -->
          <div id="emptyState" class="flex flex-col items-center justify-center h-64 bg-gray-50 rounded-lg">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" />
            </svg>
            <p class="mt-2 text-gray-500">Select a notification to view details</p>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Notification data
      const recentNotifications = [
        {
          id: 1,
          title: "Motion detected near penguin nesting area",
          content: "Motion sensors in sector 4B detected unusual activity near the penguin nesting area. Camera feed shows potential predator movement. Please review footage and take appropriate action if necessary.",
          time: "2 mins ago",
          priority: "high",
          location: "Sector 4B - Nesting Area",
          status: "Unresolved",
          icon: "ðŸ§",
          category: "recent"
        },
        {
          id: 2,
          title: "Temperature spike in zone B",
          content: "Temperature sensors in habitat zone B report a 4Â°C increase above normal levels. This could affect penguin comfort. Automatic cooling systems have been activated. Please verify system operation.",
          time: "10 mins ago",
          priority: "medium",
          location: "Habitat Zone B",
          status: "Being addressed",
          icon: "âš ï¸",
          category: "recent"
        }
      ];

      const yesterdayNotifications = [
        {
          id: 3,
          title: "Honey badger detected near perimeter",
          content: "Perimeter cameras detected a honey badger approaching the eastern fence line. This predator is known to threaten penguin colonies. Security team has been alerted. Do you want to trigger the deterrent system?",
          time: "23 hours ago",
          priority: "critical",
          location: "Eastern Perimeter - Gate 3",
          status: "Active threat",
          icon: "ðŸ¦¡",
          category: "yesterday"
        },
        {
          id: 4,
          title: "Battery is fully charged",
          content: "Solar panel system reports battery is at 100% capacity. Energy reserves are optimal for the next 48 hours under current conditions.",
          time: "Yesterday",
          priority: "low",
          location: "Power Station",
          status: "Resolved",
          icon: "â˜€ï¸",
          category: "yesterday"
        }
      ];

      const weekNotifications = [
        {
          id: 5,
          title: "Feeding system maintenance required",
          content: "Automated feeding system in sector 2A reports mechanical wear. Schedule maintenance within the next 7 days to prevent potential failure.",
          time: "3 days ago",
          priority: "medium",
          location: "Sector 2A - Feeding Station",
          status: "Pending",
          icon: "â³",
          category: "week"
        },
        {
          id: 6,
          title: "Water quality alert",
          content: "Water filtration system detected slight pH imbalance in penguin pool area. Automatic correction systems have adjusted the balance. No immediate action required but monitor closely.",
          time: "5 days ago",
          priority: "medium",
          location: "Main Pool Area",
          status: "Monitoring",
          icon: "ðŸ’§",
          category: "week"
        }
      ];

      // Render notifications lists
      function renderNotifications() {
        const recentList = document.getElementById('notificationsList');
        const yesterdayList = document.getElementById('yesterdayNotifications');
        const weekList = document.getElementById('weekNotifications');

        recentNotifications.forEach(notification => {
          recentList.appendChild(createNotificationElement(notification));
        });

        yesterdayNotifications.forEach(notification => {
          yesterdayList.appendChild(createNotificationElement(notification));
        });

        weekNotifications.forEach(notification => {
          weekList.appendChild(createNotificationElement(notification));
        });
      }

      // Create notification element
      function createNotificationElement(notification) {
        const li = document.createElement('li');
        li.className = 'notification-item bg-white p-3 rounded shadow text-sm text-gray-800';
        li.innerHTML = `
          <div class="flex items-start">
            <span class="text-lg mr-2">${notification.icon}</span>
            <div>
              <div class="font-medium">${notification.title}</div>
              <div class="text-xs text-gray-500 mt-1">${notification.time}</div>
            </div>
          </div>
        `;
        li.addEventListener('click', () => showNotificationDetail(notification));
        return li;
      }

      // Show notification detail
      function showNotificationDetail(notification) {
        document.getElementById('emptyState').classList.add('hidden');
        const detailPanel = document.getElementById('messageDetail');
        
        // Set content
        document.getElementById('detailTitle').textContent = notification.title;
        document.getElementById('detailTime').textContent = notification.time;
        document.getElementById('detailContent').textContent = notification.content;
        document.getElementById('detailLocation').textContent = notification.location;
        document.getElementById('detailStatus').textContent = notification.status;
        
        // Set priority badge
        const priorityBadge = document.getElementById('detailPriority');
        priorityBadge.textContent = notification.priority.toUpperCase();
        priorityBadge.className = `px-2 py-1 text-xs rounded-full ${
          notification.priority === 'critical' ? 'bg-red-100 text-red-800' :
          notification.priority === 'high' ? 'bg-orange-100 text-orange-800' :
          notification.priority === 'medium' ? 'bg-yellow-100 text-yellow-800' :
          'bg-green-100 text-green-800'
        }`;
        
        // Show the panel
        detailPanel.classList.remove('hidden');
        
        // Highlight selected notification
        document.querySelectorAll('.notification-item').forEach(item => {
          item.classList.remove('border-l-4', 'border-blue-500', 'pl-3');
        });
        event.currentTarget.classList.add('border-l-4', 'border-blue-500', 'pl-3');
      }

      // Initialize the page
      document.addEventListener('DOMContentLoaded', function() {
        renderNotifications();
        
        // Add click handlers for action buttons
        document.querySelectorAll('#messageDetail button').forEach(button => {
          button.addEventListener('click', function() {
            alert(`Action "${this.textContent.trim()}" would be handled here`);
          });
        });
      });
    </script>
  </body>
</html>